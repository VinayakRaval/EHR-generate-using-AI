<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Admin Dashboard ‚Äî Admin Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />

  <style>
    body {
      margin:0; 
      font-family:Inter, sans-serif; 
      background:#f5f8fa; 
      color:#2d2d2d; 
      display:flex; 
      min-height:100vh;
    }

    /* Sidebar */
    .sidebar{
      width:260px;
      background:linear-gradient(180deg,#005eea,#009dff);
      color:#fff;
      padding:24px 0;
      position:fixed;
      left:0;
      top:0;
      height:100%;
      z-index:9999;
      transition:0.3s;
      display:flex;
      flex-direction:column;
    }
    .sidebar h2{
      text-align:center;
      font-size:22px;
      margin-bottom:26px;
      font-weight:700;
    }
    .sidebar a{
      padding:12px 28px;
      color:#fff;
      text-decoration:none;
      font-weight:600;
      display:block;
    }
    .sidebar a.active, .sidebar a:hover{
      background:rgba(255,255,255,0.15);
      border-left:4px solid #fff;
    }

    .close-btn{
      display:none;
      position:absolute;
      top:10px;
      right:15px;
      font-size:28px;
      cursor:pointer;
    }

    @media(max-width:900px){
      .sidebar{ left:-280px; }
      .sidebar.open{ left:0; }
      .close-btn{ display:block; }
    }

    /* Main */
    .main{
      flex:1;
      margin-left:260px;
      transition:0.3s;
      display:flex;
      flex-direction:column;
    }
    @media(max-width:900px){
      .main{ margin-left:0; }
    }

    /* Topbar */
    .topbar{
      background:#fff;
      padding:16px 24px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      border-bottom:1px solid #e6eefc;
    }
    .menu-toggle{
      font-size:26px;
      cursor:pointer;
      display:none;
    }
    @media(max-width:900px){
      .menu-toggle{ display:block; }
    }

    /* Dashboard Cards */
    .cards{
      margin-top:20px;
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
      gap:18px;
    }
    .card{
      background:#fff;
      padding:20px;
      border-radius:14px;
      box-shadow:0px 8px 20px rgba(0,0,0,0.06);
      transition:0.2s;
      cursor:pointer;
    }
    .card:hover{
      transform:translateY(-4px);
    }
    .card h4{
      margin:0;
      font-size:14px;
      font-weight:700;
      color:#0277ff;
    }
    .card strong{
      margin-top:10px;
      display:block;
      font-size:26px;
      font-weight:800;
    }

    /* Recent Activity */
    .section-title{
      margin-top:32px;
      font-size:20px;
      font-weight:700;
      color:#333;
    }
    .table-box{
      background:#fff;
      padding:16px;
      border-radius:12px;
      margin-top:12px;
      overflow-x:auto;
      box-shadow:0 4px 14px rgba(0,0,0,0.05);
    }
    table{
      width:100%;
      border-collapse:collapse;
    }
    th,td{
      padding:12px;
      border-bottom:1px solid #eef2ff;
    }
    th{
      background:#f6fbff;
      color:#0277ff;
      font-weight:700;
      text-align:left;
    }
    .empty{
      text-align:center;
      padding:16px;
    }
  </style>
</head>

<body>

<!-- Sidebar -->
<div class="sidebar" id="sidebar">
  <span class="close-btn" onclick="toggleSidebar()">√ó</span>

  <h2>‚öôÔ∏è Admin Panel</h2>

  <a href="/admin/dashboard" class="active">üìä Admin Dashboard</a>
  <a href="/admin/manage-doctors">ü©∫ Manage Doctors</a>
  <a href="/admin/manage-patients">üë®‚Äç‚öïÔ∏è Manage Patients</a>
  <a href="/admin/audit-log">üìú Audit Log</a>
  <a href="/auth/logout">üö™ Logout</a>
</div>

<!-- Main -->
<div class="main">

  <!-- Topbar -->
  <div class="topbar">
    <span class="menu-toggle" onclick="toggleSidebar()">‚ò∞</span>
    <h2>Admin Dashboard</h2>
  </div>

  <div class="content" style="padding:26px;">

    <!-- Dashboard Stats -->
    <div class="cards">

      <div class="card">
        <h4>Total Doctors</h4>
        <strong>{{ total_doctors or 0 }}</strong>
      </div>

      <div class="card">
        <h4>Total Patients</h4>
        <strong>{{ total_patients or 0 }}</strong>
      </div>

      <div class="card">
        <h4>Total Prescriptions</h4>
        <strong>{{ total_prescriptions or 0 }}</strong>
      </div>

      <div class="card">
        <h4>Lab Reports</h4>
        <strong>{{ total_reports or 0 }}</strong>
      </div>
    </div>

    <!-- Recent Activity -->
    <h3 class="section-title">Recent Activity</h3>

    <div class="table-box">
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>User Role</th>
            <th>User ID</th>
            <th>Action</th>
            <th>Date</th>
            <th>IP</th>
          </tr>
        </thead>

        <tbody>
          {% for log in recent_logs %}
          <tr>
            <td>{{ log.log_id }}</td>
            <td>{{ log.role }}</td>
            <td>{{ log.user_id }}</td>
            <td>{{ log.action }}</td>
            <td>{{ log.timestamp }}</td>
            <td>{{ log.ip_address }}</td>
          </tr>
          {% else %}
          <tr>
            <td colspan="6" class="empty">No recent activity found.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  </div>

</div>

<script>
function toggleSidebar(){
  document.getElementById('sidebar').classList.toggle('open');
}
</script>

</body>
</html>
